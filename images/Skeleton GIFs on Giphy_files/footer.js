(function(){var a=this.Giphy={};var b=this.Timer=undefined;var c=this.Utils={};var d=this.Sharing={};var e=this.Analytics={};var f=this.Etc={};var g=this.Images={};var h=this.SearchResults={};var i=this.Nav={};var j=this.Login={};var k=this.Favorites={};var l=this.Search={};var m=this.Tags={};var n=this.Instagram={};var o=this.Browsebar={};var p=this.GifDetail={};var q=this.ArtistLanding={};var r=this.PartnerLanding={};var s=this.HeaderNav={};var t=this.Users={};var u=this.Upload={};var v=this.Newsletter={};var w=this.Facebook={};}).call(this);(function(){var a=Giphy.Analytics={trackSearchResultsView:function(){$.ajax({type:"post",beforeSend:function(a){a.setRequestHeader("Authorization","ApiKey giphy-website:e0771ed7b244ec9c942bea646ad08e6bf514f51a");},url:"/api/v1/analytics/",data:JSON.stringify({"search_term_encoded":$('#search-term').attr("data-term"),"analytic_type":"view"}),dataType:"application/json",contentType:"application/json"});},trackGifDetailView:function(){$.ajax({type:"post",beforeSend:function(a){a.setRequestHeader("Authorization","ApiKey giphy-website:e0771ed7b244ec9c942bea646ad08e6bf514f51a");},url:"/api/v1/analytics/",data:JSON.stringify({"gif_id":$('#gif').attr("data-gif_id"),"analytic_type":"view"}),contentType:"application/json",dataType:"application/json"});},fireEvents:function(a,b){_gaq.push(['_trackPageview',a]);if(!b)window.history.pushState("","",a);if(window.pSUPERFLY)window.pSUPERFLY.virtualPage(a,document.title);else{window._sf_async_config.path=a;window._sf_async_config.title=document.title;window._sf_async_config;}_qevents=[];__qc=undefined;$("#quantcast").remove();var c=$('<script async id="quantcast" src="//edge.quantserve.com/quant.js" type="text/javascript">');_qevents.push({qacct:"p-7A3Yj5VenXEQG"});$('body').append(c);}};})(window,Giphy);(function(){var a=Giphy.Backgrounds={setRandomBackground:function(){if($("#animated-background-wrapper").length>0)$.ajax({type:"get",url:"/ajax/animated-backgrounds/",success:function(a){Giphy.Backgrounds.createBackgrounds(a);}});},createBackgrounds:function(a){var b=a.result;var c=b[Math.floor(Math.random()*b.length)];var d=$('<video></video>').attr({id:"animated-background",preload:"auto",autoplay:true,loop:"loop"}).css('opacity',0);var e=$('<source></source>').attr({src:c.webm_url,type:"video/webm"});var f=$('<source></source>').attr({src:c.mp4_url,type:"video/mp4"});d.append(f);d.append(e);$("#animated-background-wrapper").append(d);var g=$("#attribution");g.find('.byline').attr({"href":c.artist.profile_url});g.find('.avatar').attr({"src":c.artist.avatar_url});g.find('.username-text').text(c.artist.name);d.on('canplaythrough',function(){d.fadeTo("slow",0.6);g.css({opacity:1});});}};})(window,Giphy);(function(){var a=Giphy.Browsebar={init:function(){this.nextDisplayIndex=0;this.currGifIndex=-1;this.BrowsebarTimeout=undefined;this.CloseAnimationTimeout=undefined;this.DISPLAY_TIMEOUT_DELAY;this.CLOSE_TIMEOUT_DELAY=200;this.pastDisplayIndex=-1;},attachBrowsebarHovers:function(){var b=$("#browsebar a");var c=0;b.mouseenter(function(b){var c=$(this);$("#browsebar a").eq(a.pastDisplayIndex).removeClass("open");$(this).addClass("open");});b.mouseleave(function(a){var b=$(this);setTimeout(closeAnimation=function(){b.removeClass("open");},200);});}};})(window,Giphy);(function(){var a=Giphy.Etc={init:function(){$.ajaxSetup({beforeSend:function(a){a.setRequestHeader("Authorization","ApiKey giphy-website:e0771ed7b244ec9c942bea646ad08e6bf514f51a");}});},reAuthFacebook:function(){FB.login(function(a){if(a.status=='connected'){window.FACEBOOK_PERMISSION=true;window.FB_ACCESS_TOKEN=a.authResponse.accessToken;$.ajax({type:"POST",url:"/login/fb/update",data:{access_token:a.authResponse.accessToken},success:function(a,b,c){},error:function(a,b,c){}});}},{scope:'email,publish_actions'});},checkPermission:function(){var a=function(){return setTimeout(function(){FB.api("/me/permissions",{access_token:window.FB_ACCESS_TOKEN},function(a){for(var b=0;b<a.data.length;b++)if(a.data[b].permission=='publish_actions'&&a.data[b].status=='granted')window.FACEBOOK_PERMISSION=true;if(!window.FACEBOOK_PERMISSION)Giphy.Etc.reAuthFacebook();});},1000);};if(typeof FB!="undefined")a();else window.fbAsyncInit=function(){return a();};},checkLogin:function(a){if(window.HAS_CHECKED_LOGIN)a.success();$.ajax({type:"GET",url:"/login/check/",dataType:"json",success:function(b){window.LOGGED_IN=b.result.logged_in;window.IS_PARTNER=b.result.is_partner;window.IS_ARTIST=b.result.is_artist;window.HAS_CHECKED_LOGIN=true;window.FB_AUTH=b.result.fb_auth;window.FB_ID=b.result.fb_id;if(window.FB_AUTH){window.FB_ACCESS_TOKEN=b.result.fb_access_token;Giphy.Etc.checkPermission();}for(var c=0;c<b.result.messages.length;c++){var d=b.result.messages[c];var e=d.tags;var f=d.text;var g=$("<div>");g.addClass("flash");g.addClass(e);g.text(f);$("#messages").append(g);setTimeout(function(){$('.flash').fadeOut('slow');},3000);}$(window).trigger("login:check");if(a!=undefined&&a.success!=undefined)a.success();},error:function(a,b,c){window.LOGGED_IN=false;window.IS_PARTNER=false;}});return this;}};})(window,Giphy);(function(){var a=Giphy.Favorites={nav:function(){$("#favorites-nav").click(function(a){if(!window.LOGGED_IN){window.location="https://"+document.domain+"/login/?next=/favorites";return false;}});},permalink:function(){if($(".gif-detail").length>0){var a=$("#gif").attr("data-gif_id");$.ajax({type:"get",url:"/favorites/"+a+"/",success:function(a){$(".favorite").each(function(b){var c=$(this);if(a.result.has_favorited){c.addClass('favorited');c.addClass('_011_heart_red');c.removeClass('_012_heart_white');}else{c.removeClass('favorited');c.addClass('_012_heart_white');c.removeClass('_011_heart_red');}c.show();});}});$(".favorite").click(function(a){if(!window.LOGGED_IN){_gaq.push(['_trackEvent','Favorites','ModalOpened']);_gaq.push(['_trackEvent','Favorites','HeartClick','LoggedOut']);window.location="https://"+document.domain+"/login/?next="+location.pathname;return false;}var b=$(this);_gaq.push(['_trackEvent','Favorites','HeartClick','LoggedIn',$(this).attr('data-gif_id')]);if(!b.hasClass('favorited'))$(".favorite").each(function(){$(this).addClass('favorited');$(this).addClass('_011_heart_red');$(this).removeClass('_012_heart_white');});else $(".favorite").each(function(){$(this).removeClass('favorited');$(this).addClass('_012_heart_white');$(this).removeClass('_011_heart_red');});$.ajax({type:"post",url:"/favorites/"+$(this).attr('data-gif_id')+"/",success:function(a){if(a.result.has_favorited)showSuccess("Added to favorites!");else showSuccess("Removed from favorites!");}});return false;});$(".favorite").mouseenter(function(a){var b=$(this);if(!b.hasClass('favorited')){b.addClass('_011_heart_red');b.removeClass('_012_heart_white');}else{b.removeClass('_011_heart_red');b.addClass('_012_heart_white');}});$(".favorite").mouseleave(function(a){var b=$(this);if(!b.hasClass('favorited')){b.removeClass('_011_heart_red');b.addClass('_012_heart_white');}else{b.addClass('_011_heart_red');b.removeClass('_012_heart_white');}});}}};})(window,Giphy);(function(){var a=Giphy.Facebook={search:function(a){$(".choice.active").removeClass("active");$("#searchresults").html('');$("#no-results").hide();$("#searchresults").show();$("#searchresults").addClass("loading");$.ajax({url:"/ajax/fb/tag/"+a,method:"GET",success:function(a){$("#searchresults").removeClass("loading");$("#searchresults").html(a);Giphy.SearchResults.attachInfiniteScroll();Giphy.Images.sizeImages("#searchresults");var b=$(".hoverable li, .row-tag, .featured-item, .featured-user");if(b.length==0){$("#no-results").show();$("#searchresults").hide();}else{$("#no-results").hide();$("#searchresults").show();$(".gifs-gif").each(function(){$(this).attr('src',$(this).data('animated'));});}}});},checkPermissions:function(a,b,c){var d=function(){FB.api('/me/permissions',function(d){for(var e=0;e<d.data.length;e++)if(d.data[e].permission=='publish_actions'){window.ACCESS_TOKEN=a;if(b!==undefined)b();return false;}if(c===undefined)FB.login(function(a){if(a.status=='connected')Giphy.Facebook.checkPermissions(a.authResponse.accessToken,b,true);},{scope:'publish_actions, email'});});};if(typeof FB!="undefined")d();else window.fbAsyncInit=function(){return d();};},setup:function(){Giphy.Facebook.search("happy");$(".choice").first().addClass("active");$(document).bind("search:success",function(a,b){$("#searchresults").show();$("#no-results").hide();});$(document).bind('search:execute',function(a){$("#no-results").hide();});$(document).bind('search:dont_display',function(a){$(document).trigger("search:clear");});$(".no-result").on('click',function(){console.log('hi');console.log($(this).text());$("#search-box").val($(this).text());$("#placeholder").hide();Giphy.Facebook.search($(this).text());return false;});$(document).bind('images:done_sizing',function(a,b){$("a.gif-link").off('click').on('click',function(){var a=$(this).data('id');if(!window.ACCESS_TOKEN)FB.getLoginStatus(function(b){if(b.status=='connected')Giphy.Facebook.checkPermissions(b.authResponse.accessToken,function(){Giphy.Facebook.showModal(a);});else FB.login(function(b){if(b.status=='connected')Giphy.Facebook.checkPermissions(b.authResponse.accessToken,function(){Giphy.Facebook.showModal(a);});else{}},{scope:'publish_actions, email'});});else Giphy.Facebook.showModal(a);return false;});$(".tags").hide();});$('.choice').on('click',function(){$("#search-box").val($(this).data("tag-encoded"));$("#placeholder").hide();Giphy.Facebook.search($(this).data("tag-encoded"));$(this).addClass('active');return false;});},showModal:function(a){$("#fb_status").val('');$("#fb_details").show();$("#fb_response").hide();$("#fb_submit").show();$("#fb_submitting").hide();$("#fb_status").focus();$("#fb_post").off('click').on('click',function(){$("#fb_submit").hide();$("#fb_submitting").show();$.ajax({url:"/ajax/fb/upload/",method:"POST",data:{"gif_id":a,"status":$("#fb_status").val(),"token":window.ACCESS_TOKEN},success:function(a){$("#fb_submit").hide();$("#fb_submitting").hide();$("#fb_details").hide();$("#fb_response").show();},error:function(){$("#fb_submit").hide();$("#fb_submitting").hide();$("#fb_response").show();$("#fb_response_text").text("Oh no! Something went wrong. Please try posting your status update again.");}});});$("#fb_ok").off('click').on('click',function(){$.modal.close();});$("#fb_cancel").off('click').on('click',function(){$.modal.close();});$("#gif_id").val(a);$("#gif_preview").attr("src","");$("#gif_preview").attr("src","http://giphygifs.s3.amazonaws.com/media/"+a+"/giphy.gif");$("#fb_modal").modal({overlay:"#000",opacity:0.8,modalClass:"lolwhatever",showClose:false,showSpinner:false,zIndex:101});}};})(window,Giphy);(function(){var a=Giphy.GifDetail={initEdits:function(){if(window.CAN_EDIT_GIF){Giphy.GifDetail.addTagListener();Giphy.GifDetail.deleteTagListner();Giphy.GifDetail.editSource();Giphy.GifDetail.editSourceContentURL();Giphy.GifDetail.editCaption();Giphy.GifDetail.updateRating();Giphy.GifDetail.showDeleteGifModal();Giphy.GifDetail.addEditViewLinks();}},addEditViewLinks:function(){var a=$("#gif"),b=a.attr("data-id"),c=$('#edit-gif-tools');if(!c.length){var d=$("<a></a>").addClass("small button transparent-background edit-image").attr("href","/home/gifs/"+b+"/edit/").html("Edit");a.after(d);}else{var e=$("<a></a>").addClass("small button transparent-background edit-image").attr("href","/gifs/"+b).html("View");a.after(e);}},showDeleteGifModal:function(){var a=$('#delete-gif-button');if(a.length)a.click(function(a){$('#delete-gif-modal').modal({closeText:'',zIndex:100});$('#cancel-delete').click(function(a){$.modal.close();});$("#delete-gif-submit").click(function(a){a.preventDefault();var b=$(this);b.prop("disabled",true);b.html("Deleting GIF...");var c="delete-gif",d="true",e=$('#gif').attr('data-id'),f=Giphy.GifDetail.submitUpdate(c,d,e);$.when(f).then(function(a){if(a.result)if(a.result.code==200)document.location.href=a.result.data+"?message=gifdeleted&status=200";else{$.modal.close();showError("Unable to delete GIF. "+a.result.message);b.prop("disabled",false);b.html("Delete");}else{$.modal.close();showError("Unable to delete GIF. Please try again.");b.prop("disabled",false);b.html("Delete");}});});});},noResizeListner:function(){var a=$('input#preserve-size'),b=a.attr('name'),c=$('#gif').attr('data-id');if(a.length)a.change(function(a){var d=$('input#preserve-size').is(":checked");update=Giphy.GifDetail.submitUpdate(b,d,c);$.when(update).then(function(a){if(a.result)if(a.result.code==200)showSuccess("GIF updated!");else showError("Unable to update GIF. Please try again.");else showError("Unable to update GIF. Please try again.");});});},hideGifListner:function(){var a=$('input#is-hidden'),b=a.attr('name'),c=$('#gif').attr('data-id');if(a.length)a.change(function(a){var d=$('input#is-hidden').is(":checked");update=Giphy.GifDetail.submitUpdate(b,d,c);$.when(update).then(function(a){if(a.result)if(a.result.code==200)showSuccess("GIF updated!");else showError("Unable to update GIF. Please try again.");else showError("Unable to update GIF. Please try again.");});});},addTagListener:function(){var a=$('button#add-tag-button'),b=$('input.add-tag');a.prop("disabled",false);b.prop("disabled",false);b.off().on('keypress',function(a){if(a.which==13){Giphy.GifDetail.handleTagSubmit();return;}});a.off().on('click',function(a){Giphy.GifDetail.handleTagSubmit();return;});},handleTagSubmit:function(){var a=$('button#add-tag-button'),b=$('input.add-tag'),c=$('#gif').attr('data-id');b.off();a.off();a.prop("disabled",true);b.prop("disabled",true);var d=b.val().toLowerCase();var e=d.replace(/[^\w ]+/g,'').replace(/ +/g,'-');if($('#'+e).length){showSuccess("That tag already exists!");Giphy.GifDetail.addTagListener();return;}if(!d.trim()){showSuccess("No tag entered!");Giphy.GifDetail.addTagListener();return;}var f={"gif_id":c,"key":"create-tag","value":d};Giphy.GifDetail.updateGifTag(f);},deleteTagListner:function(){var a=$('.delete'),b=$('#gif').attr('data-id');a.off().on("click",function(c){var d=$(c.target).parents('h3').attr('id');a.off();if(!d)return;var e={"gif_id":b,"key":"delete-tag","value":d};Giphy.GifDetail.updateGifTag(e);});},updateGifTag:function(a){$.ajax({type:"post",url:"/ajax/gif/update",data:a}).always(function(b){Giphy.GifDetail.addTagListener();if(b.result){$('.new-tag').val("");$('.update-tag-img').show();if(b.result.code!=200)showError("Uh oh. Something went wrong. Please try again.");else if(a.key=="create-tag"){var c=b.result.data.tag_name,d=b.result.data.tag_slug;var e="<h3 id='"+d+"' class='tag'><a id="+d+" href=/search/"+d+"><span class='hash'>#</span>"+c+"</a><button class='delete-tag delete red-background'><img src='/static/img/delete_tag_white.png'/></button></h3>";showSuccess("Tag added!");$(e).insertBefore("h3.add-tag");$("input.add-tag").val("");Giphy.GifDetail.deleteTagListner();}else if(a.key=="delete-tag"){var d=a.value.replace(/[_\s]/g,'-');$('#'+d).remove();Giphy.GifDetail.deleteTagListner();showSuccess("Tag deleted!");}}});},editSource:function(){var a=$("#source-submit"),b=$("#source-edit-small-form .cancel");b.click(function(a){$("#edit-source").attr("value","");$("#edit-source").val("");});a.click(function(a){a.preventDefault();var b=$('#edit-source').val(),c=$('#edit-source').attr("name"),d=$('#gif').attr('data-id'),e=Giphy.GifDetail.submitUpdate(c,b,d);$.when(e).then(function(a){if(a.result)if(a.result.code==200){var b=a.result.data.source_post_url;$('#gif-source-link').text(b);$('#gif-source-link').attr('href',b);$('#edit-source').attr("value",b);$('#source-edit-small-form').slideToggle(100);showSuccess("Source updated!");}else if(a.result.code==400)showError(a.result.message);else showError("Unable to update source. Please try again.");else showError("Unable to update source. Please try again.");});});},editCaption:function(){var a=$("#caption-submit"),b=$("#caption-edit-small-form .cancel");b.click(function(a){$("#edit-caption").attr("value","");$("#edit-caption").val("");});a.click(function(a){a.preventDefault();var b=$('#edit-caption').val(),c=$('#edit-caption').attr("name"),d=$('#gif').attr('data-id'),e=Giphy.GifDetail.submitUpdate(c,b,d);$.when(e).then(function(a){if(a.result)if(a.result.code==200){var b=a.result.data.source_caption;$('#caption-text').text(b);$('#edit-caption').attr("value",b);$('#caption-edit-small-form').slideToggle(100);showSuccess("Caption updated!");}else showError("Unable to update caption. Please try again.");else showError("Unable to update caption. Please try again.");});});},editSourceContentURL:function(){var a=$("#content-url-submit"),b=$("#content-url-small-form .cancel");b.click(function(a){$("#content-url").attr("value","");$("#content-url").val("");});a.click(function(a){a.preventDefault();var b=$('#content-url').val(),c=$('#content-url').attr("name"),d=$('#gif').attr('data-id'),e=Giphy.GifDetail.submitUpdate(c,b,d);$.when(e).then(function(a){if(a.result)if(a.result.code==200){var b=a.result.data.source_content_url;$('#content-url-text').text(b);$('#content-url').attr("value",b);$('#content-url-small-form').slideToggle(100);showSuccess("Source Content URL updated!");}else if(a.result.code==400)showError(a.result.message);else showError("Unable to update source. Please try again.");else showError("Unable to update Source Content URL. Please try again.");});});},submitUpdate:function(a,b,c){return $.ajax({type:"post",url:"/ajax/gif/update",data:{"key":a,"value":b,"gif_id":c}}).always(function(a){return a;});},updateRating:function(){var a=$('.rating'),b=$('#gif').attr('data-id');a.click(function(){var c=$(this),d=c.text();$.ajax({type:"post",url:"/ajax/gif/update",data:{"key":"rating","value":d,"gif_id":b}}).always(function(b){if(b.result)if(b.result.code==200){showSuccess("Rating updated!");a.removeClass('selected');c.addClass('selected');}else showError("Unable to update rating. Please try again.");else showError("Unable to update rating. Please try again.");});});},twitterCancel:function(){$("#twitter-cancel").click(function(a){$("#twitter-status").text('');$("#twitter-upload").click();});},submitTweet:function(){$("#twitter-tweet").click(function(a){if($(this).hasClass("tweet-too-long"))return false;$.ajax({type:"POST",url:"/ajax/twitter_upload",data:{gif_id:$('#gif').attr('data-id'),status:$("#twitter-status").val()},success:function(a,b,c){if(a.result.response.meta.status==200)window.showSuccess("Your tweet has been sent.");else window.showError("ERROR: "+a.result.response.meta.msg);},error:function(a,b,c){window.showError("An error has occured. Try again later.");}});$("#twitter-upload").click();});},handleCharacterCount:function(a){var b=117,c=[],d=$("#twitter-status"),e=117;var f=d.val();c=twttr.txt.extractUrls(f);for(var g=0;g<c.length;g++){f=f.replace(c[g],"");if(c[g].toLowerCase().substring(0,5)=="http:")e-=22;else e-=23;}e-=f.length;if(e<0){$("#tweet-count").text("("+e+")");$("#twitter-tweet").addClass("tweet-too-long");}else{$("#twitter-tweet").removeClass("tweet-too-long");$("#tweet-count").text("("+e+")");}},showFacebookModal:function(){$("#facebook-upload-modal").show();$("#fb_submit").show();$("#fb_submitting").hide();$("#facebook-cancel").on('click',function(){$("#facebook-status").val("");$("#facebook-upload-modal").hide();});$("#facebook-share").on('click',function(){$("#fb_submit").hide();$("#fb_submitting").show();$.ajax({type:"POST",url:"/ajax/facebook_upload",data:{gif_id:$('#gif').attr('data-id'),status:$("#facebook-status").val(),token:window.ACCESS_TOKEN},success:function(a,b,c){if(a.status==200)window.showSuccess("GIF uploaded to facebook!");else window.showError("An error has occurred.");$("#facebook-status").val("");$("#facebook-upload-modal").hide();},error:function(a,b,c){window.showError("An error has occured. Try again later.");$("#facebook-status").val("");$("#facebook-upload-modal").hide();}});});},initFacebook:function(){if($(".facebook-upload").length==0)return;var a=function(){return $(document).ready(function(){$("#facebook-upload").click(function(){if(!window.ACCESS_TOKEN){FB.getLoginStatus(function(a){if(a.status=='connected')Giphy.Facebook.checkPermissions(a.authResponse.accessToken,function(){Giphy.GifDetail.showFacebookModal();});else FB.login(function(a){if(a.status=='connected')Giphy.Facebook.checkPermissions(a.authResponse.accessToken,function(){Giphy.GifDetail.showFacebookModal();});},{scope:'publish_actions, email'});});}else Giphy.GifDetail.showFacebookModal();return false;});});};if(typeof FB!="undefined")a();else window.fbAsyncInit=function(){return a();};},initTwitter:function(){if($(".twitter-upload").length==0)return;$(document).ready(function(){var a=Giphy.GifDetail,b=$("#twitter-upload"),c=Giphy.Utils.getParameterByName("twit_auth");a.twitterCancel();a.submitTweet();a.handleCharacterCount();$("#twitter-status").on("keyup",function(b){a.handleCharacterCount(b);}).on("change",function(b){a.handleCharacterCount(b);}).on("input",function(b){a.handleCharacterCount(b);});$("#tweet-preview").css('max-height',$("#twitter-status").height());$("#twitter-logout-button").on("click",function(){$.removeCookie("giphy-twitter-upload");document.location.href="/logout?next="+location.pathname;return false;});b.on("click",function(){Giphy.GifDetail.toggleTwitterModal();});if(c)Giphy.GifDetail.toggleTwitterModal();});},toggleTwitterModal:function(){var a=$.cookie("giphy-twitter-upload");if(typeof a=="undefined"){var b=$('#gif').attr('data-id');window.location="/login/twitter?next=http://"+window.ASSET_DOMAIN+"/login/twitter/finalize?next=http://"+window.ASSET_DOMAIN+"/gifs/"+b;return;}var c=$("#twitter-upload");$(".dialog").hide();$('.hover').removeClass('hover');$("#twitter-upload-modal").addClass("hover");if(c.hasClass("open")){c.removeClass("open");c.siblings("a#twitter-share").show();c.find(".label").hide();c.css("width","30px");$("#twitter-upload-modal").fadeOut('fast');}else{c.addClass("open");c.siblings("a#twitter-share").hide();c.css("width","92px");c.find(".label").show();$("#twitter-upload-modal").fadeIn('fast');}},html5Player:function(){if(Giphy.Utils.getParameterByName("html5")==='true'){var a=Giphy.Utils.canPlayMP4(),b=$('img#gif'),c=$('div#gif-wrap');if(a===true){c.empty();c.html('<video id="gif-mp4" width="'+b.attr('width')+'" height="'+b.attr('height')+'"'+'poster="'+b.data('still')+'"'+'data-original-height="'+b.data('original-height')+'"'+'data-original-width="'+b.data('original-width')+'"'+'autoplay loop>'+'<source src="'+b.data('mp4_url')+'" type="video/mp4"></source>'+'</video>');}}}};})(window,Giphy);(function(){var a=Giphy.Homepage={init:function(){var a=$('#homepage');if(a.length){Giphy.Homepage.attachInfiniteScroll();Giphy.Homepage.attachHovers();Giphy.Homepage.playFeaturedViewport();Giphy.Homepage.attachNotice();$(document).on('scroll',function(){Giphy.Homepage.playFeaturedViewport();});}},attachInfiniteScroll:function(){$.extend($.infinitescroll.prototype,{beginAjax:function a(a){var b=this,c=a.path,d,e;if(typeof a.state.nextPage!='undefined')e=a.state.nextPage;else e=c[0];var f=$(a.contentSelector).is('table, tbody')?$('<tbody/>'):$('<div/>');f.load(e+' '+a.itemSelector,undefined,function g(c){next=$($(c).find(a.nextSelector));a.state.nextPage=next.attr("href");e=a.state.nextPage;b._loadcallback(f,c,e);});}});window.CURRENT_PAGE=1;$('.homepage').infinitescroll({nextSelector:"a#next-page-arrow",navSelector:"div#paging",itemSelector:".homepage-half",bufferPx:10,state:{currPage:window.CURRENT_PAGE},pathParse:function(a,b){var c=a.split('?')[0];var d=a.split('?')[1];var e=d?"?"+d+"&is=1":"?is=1";var f=['/page/'+b+e+''];return f;},behavior:"giphy",loading:{finishedMsg:"",img:"/static/img/loading_bar_page.gif",msgText:"",speed:'fast',finished:function(){$('#infscr-loading').remove();var a=$(this).data('infinitescroll');window.CURRENT_PAGE+=1;window.OFFSET_PAGE=window.CURRENT_PAGE-1;Giphy.Analytics.fireEvents('/page/'+window.CURRENT_PAGE);Giphy.Homepage.attachHovers();}}});},attachHovers:function(){var a=$('.hoverable');a.mouseenter(function(a){var b=$(this).find('img'),c=$(this).find('.loader'),d=b.attr('data-animated');$('.loader').hide();c.show();b.addClass('hovering');$("<img />").attr('src',d).load(function(){c.css('display','none');if(b.hasClass('hovering')){b.removeAttr('nopin');b.attr('src',d);}});});a.mouseleave(function(a){var b=$(this).find('img'),c=$(this).find('.loader'),d=b.attr('data-static');b.removeClass('hovering');b.attr('nopin','nopin');b.attr('src',d);c.hide();});},playFeaturedViewport:function(){var a=$('.homepage-featured');var b=$(window).scrollTop();var c=b+$(window).height();$.each(a,function(a,d){var e=$(d),f=e.find('img'),g=e.find('.loader'),h=f.attr('data-animated'),i=f.attr('data-static');if((((e.offset().top+e.height())<=c)&&((e.offset().top+e.height())>=b))){if(f.attr("src")!=f.attr("data-animated")){f.addClass('hovering');$("<img />").attr('src',h).load(function(){g.css('display','none');if(f.hasClass('hovering')){f.removeAttr('nopin');f.attr('src',h);}});}}else{f.removeClass('hovering');f.attr('nopin','nopin');f.attr('src',i);g.hide();}});},attachNotice:function(){if($("#notice-banner").length>0){var a="giphy-"+$("#notice-banner").data('name');if(!$.cookie(a)){setTimeout(function(){$("#notice-content").appendTo("#notice-banner");$("#notice-content").show();$("#notice-banner").slideDown();},3000);$("#notice-dismiss").on('click',function(b){b.preventDefault();Giphy.Homepage.dismissNotice(a);return false;});}}},dismissNotice:function(a){$.cookie(a,"1",{expires:365});if($("#notice-banner").length>0)$("#notice-banner").slideUp();}};})(window,Giphy);(function(){var a=Giphy.Images={preloadImages:function(){var a=["https://giphy.com/static/img/facebook_animated.gif","https://giphy.com/static/img/twitter_animated.gif","https://giphy.com/static/img/loading_bar.gif"];for(i=0;i<a.length;i++){var b=new Image();b.src=a[i];}},showOriginalSize:function(){if($("#gif").attr("data-padding-top")>0){$("#gif").css('height',$("#gif").attr("data-original-height"));$("#gif").css('width',$("#gif").attr("data-original-width"));$("#gif").css('padding-top',$("#gif").attr("data-padding-top")+'px');}return false;},sizeImages:function(){var a=$('.last-row').find('li');var b=$('.freeform').find('li.ungrouped');b.removeClass("ungrouped");var c=$.merge(a,b);var d=c.find('img');if(d.length===0)return;var e=0;if($(".fb_container").length==0){var f=$('#content').width();var g=200;var h=$("#_giphy_tv").length>0&&(typeof _suppress_tv_resize=='undefined');}else{var f=700;var g=150;var g=200;var h=false;}if(typeof window.margin==='undefined'){var i=parseInt($(d[0]).parent().parent().parent().parent().css("margin-right"),10);window.margin=i;}else var i=window.margin;var j=[];var k=0;var l=0;window.tvPlaced=window.tvPlaced||false;$.each(d,function(a){var b=d[a];var c=parseInt($(b).attr("data-width"),10);var e=parseInt($(b).attr("data-height"),10);if(e!=g)c=Math.floor(c*(g/e));j.push(parseInt(c,10));});while(e<d.length){var m=0;var n=0;var o=0;var p=0;var q=false;var r=(k<2&&h&&$(window).width()>480&&!window.tvPlaced)?f/2:f+i;while(o<r){if(e+m==j.length){o+=i;q=true;break;}var s=j[e+m]+i;o+=s;if(e+m>=d.length){q=true;break;}m++;}var t=$("<div class='hoverable'/>");if(h&&!tvPlaced&&k<2){$(t).css('float','left');$(t).css('width',r);$(t).css('clear','left');}var u=r/o;while(n<m){var v=j[e]*u;var w=g*u;var x=$(d[e]);if(q){v=parseInt($(x).attr('data-width'),10);w=parseInt($(x).attr('data-height'),10);}p+=v+i;x.width(v);x.height(w);t.append('<li style="width: '+v+'px;">'+x.parent().parent().parent().parent().html()+'</li>');x.parent().parent().parent().parent().remove();if(n==m-1){z=$(t).find("li:last");z.css('margin-right','0px');}n++;e++;}if(!q)if(p>r){var y=0;while(p>r){var z=$(t).find("li:nth-child("+(y+1)+")");var x=z.find('img');$(x).width($(x).width()-1);$(z).width($(z).width()-1);p--;if(++y>=$(t).find("img").length)y=0;}}else if(p<r){var y=0;while(p<r){var z=$(t).find("li:nth-child("+(y+1)+")");var x=z.find('img');$(x).width($(x).width()+1);$(z).width($(z).width()+1);p++;if(++y>=$(t).find("img").length)y=0;}}if(q===true)t.addClass('last-row');$('.gifs').append(t);if(h&&!window.tvPlaced&&k<2)l+=$(t).height();k++;$(document).trigger("images:done_sizing");}if(h&&!window.tvPlaced){var A=function(){if($("#asdf-container").length==0){setTimeout(A,100);return;}window.tvPlaced=true;$("#_giphy_tv").width(f/2);$("#_giphy_tv").height(l-5);__TV.sizeTo(f/2,l-5);__TV.resize();__TV.sizeTo(f/2,l-5);$("#_giphy_tv").css('margin-top','-35px');};A();}$('.bottom-tags a').show();return this;},sizeImagesToFrame:function(){var a=$('.framed-gif');if(a.length)$.each(a,function(a,b){var c=$(b),d=c.attr("data-original-height"),e=c.attr("data-original-width"),f=c.parents(".frame"),g=f.width(),h=f.height(),i=e/d,j=g/h,k,l,m,n;if(i>=j){m=(h/d)*e;n=h;l=-(m-g)/2;k=0;}else{m=g;n=(g/e)*d;l=0;k=-(n-h)/2;}c.css({"margin-top":k,"margin-left":l});c.attr({"height":n,"width":m});});},removePageNumbersForBackButton:function(){var a=$('.hoverable li');if(a.length)a.each(function(a,b){href=$(b).find(".a-gif");href.click(function(a){var b=window.location.href;var c=b.replace('http://','').split('/').length;if(b.indexOf("search")!=-1&&c==4){var d=b.replace(b.substr(b.lastIndexOf('/')+1),'');if(window.history.pushState)window.history.pushState("","",d);}});});},attachHovers:function(){var a=$(".hoverable li, .row-tag, .featured-item, .featured-user");if(a.length){a.off("mouseenter","**").mouseenter(function(a){var b=$(this).find(".hover-target").length?$(this).find(".hover-target"):$(this).find('img'),c=$(this).find('.loader'),d=b.attr('data-animated'),e=$(this).find('.promote-gif-hover');$('.loader').hide();c.css('display','block');b.addClass('hovering');$("<img />").attr('src',d).load(function(){c.css('display','none');if(b.hasClass('hovering')){b.removeAttr('nopin');b.attr('src',d);if(b.width()<150){e.find('h1').text('top').css('margin-right',10);e.find('.promote-gif-text').css('width','auto');}e.show();}});});a.off("mouseleave","**").mouseleave(function(a){var b=$(this).find(".hover-target").length?$(this).find(".hover-target"):$(this).find('img');b.removeClass('hovering');b.attr('nopin','nopin');b.attr('src',$(b).attr('data-still'));b.parent('.gif').parent().children('.loader').css('display','none');$(this).find('.promote-gif-hover').hide();});}return this;}};})(window,Giphy);(function(){var a=Giphy.Instagram={showModal:function(){var a=$("#instagram-share"),b=$('#instashare-share'),c=$('#instashare-send-button'),d=$("#instashare-loader"),e=$('#instashare-email-input');e.keypress(function(a){if(a.which==13)c.click();});$(".instashare-okbutton").click(function(){a.removeClass('hover');$("#instashare-modal").hide();});a.click(function(){if($('#instashare-modal').css('display')=='block'){$("#instashare-modal").hide();a.removeClass('hover');}else{$(".dialog").hide();$('.hover').removeClass('hover');$("#instashare-modal").show();a.addClass('hover');}b.show();c.show();d.hide();e.val('');});c.click(function(){c.hide();d.show();var b="/ajax/instashare/";$.ajax({type:"post",url:b,data:{"gif_id":$('#gif').attr("data-gif_id"),"to":$("#instashare-email-input").val()}}).always(function(b){if(b.result)if(b.result.code!=200){showError("UH OH. Something went wrong. Try again?");a.removeClass('hover');$("#instashare-modal").hide();}else{showSuccess("Success! Check your email in about 5 minutes. We sent you a GIF you can upload to Instagram.");a.removeClass('hover');$("#instashare-modal").hide();}else{showError("UH OH. Something went wrong. Try again?");a.removeClass('hover');$("#instashare-modal").hide();}});});}};})(window,Giphy);(function(){var a=Giphy.Login={facebook:function(){var a=Giphy.Utils.getParameterByName("next");if(a)window.LOGIN_NEXT=location.protocol+"//"+location.host+a;if(typeof window.LOGIN_NEXT=="undefined")if(location.pathname!="/login")window.LOGIN_NEXT=document.URL;else window.LOGIN_NEXT="http://"+location.host;$(".facebook-login").click(function(){document.location.href='/login/facebook/?next='+window.LOGIN_NEXT+"?status=200&message=login";return false;});return this;},loginFocus:function(){var a=$("#login-form");if(a.length)$("#email").focus();}};})(window,Giphy);(function(){var a=Giphy.Nav={share:function(){$("input[type='text']").on("click",function(){$(this).select();});},attachFooter:function(){if(($('#homepage').length>0)||($(".freeform").length>0)){var a=$("#footer");a.css('position','fixed');a.css('bottom','0px');a.css('opacity','0');a.css('z-index','10000');$(document).mousemove(function(b){var c=$(window);var d=b.pageY;var e=c.height()+c.scrollTop()-d-200;if(e<=100)a.css('opacity','1');else a.css('opacity','0');});}}};})(window,Giphy);(function(){var a=Giphy.Newsletter={attachNewsletter:function(){if($("#newsletter-placeholder").length>0)if(!$.cookie("dismiss-newsletter")){setTimeout(function(){$("#newsletter-content").appendTo("#newsletter-placeholder");$("#newsletter-content").show();$("#newsletter-placeholder").slideDown();},3000);$("#newsletter-dismiss").on('click',function(a){a.preventDefault();Giphy.Newsletter.dismissNewsletter();return false;});}$("#newsletter-form").on('submit',function(a){a.preventDefault();var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(!b.test($("#newsletter-email").val())){showError("Please enter a valid email address.");return;}$("#newsletter-content").removeClass('inactive');$("#newsletter-content").addClass('active');$.ajax({type:'post',url:'/ajax/newsletter',data:{'email':$("#newsletter-email").val(),'action':$(this).attr('data-action')},dataType:'json',error:function(a){$("#newsletter-content").removeClass('active');$("#newsletter-content").addClass('inactive');showError("An error occurred.");},success:function(a){if(a.result.error){showError(a.result.error);$("#newsletter-content").removeClass('active');$("#newsletter-content").addClass('inactive');}else{if($("#newsletter-content").length>0)$("#newsletter-form").animate({"margin-top":"200"},300,function(){});$("#newsletter-content").removeClass('active');$("#newsletter-content").addClass('success');if(document.location.pathname!='/'){Giphy.Newsletter.dismissNewsletter();showSuccess(a.result.response,'/',1500);}else setTimeout(function(){Giphy.Newsletter.dismissNewsletter();},2000);}}});});},dismissNewsletter:function(){$.cookie("dismiss-newsletter","1",{expires:365});if($("#newsletter-placeholder").length>0)$("#newsletter-placeholder").slideUp();}};})(window,Giphy);(function(){var a=Giphy.Overlays={getShareHtml:function(){return [$("<a>",{"id":"fb-share","class":"facebook facebook-blue social-share","title":"Share on Facebook","target":"_blank","href":"#","click":function(){window.open("http://www.facebook.com/sharer/sharer.php?u="+document.URL,"1361370515039","width=650,height=280,toolbar=0,menubar=0,location=0,status=0,scrollbars=0,resizable=1,left=0,top=0");return false;}}),$("<a>",{"id":"twitter-share","class":"twitter twitter-blue social-share","title":"Share on Twitter","target":"_blank","href":"#","click":function(){window.open("http://twitter.com/share?url="+document.URL+"?tc=1&text="+window.socialShareTitle+"&via=giphy","1361370074860","width=500,height=252,toolbar=0,menubar=0,location=0,status=1,scrollbars=0,resizable=1,left=0,top=0");return false;}})];},getGifViewHtml:function(){var a=this;var b=[$("<a>",{"id":"gif-tile-link","class":"gif-tile-link sprite _023_tile","title":"tile View","href":a.createOverlayUrl('tile')}),$("<a>",{"id":"gif-fullscreen-link","class":"gif-fullscreen-link sprite _004_fullscreen","title":"Fullscreen View","href":a.createOverlayUrl('fullscreen')})];if($("#gif-mp4").length>0)b.push($("<a>",{"id":"gif-version-link","class":"gif-version-link","title":"GIF View","href":a.createOverlayUrl('gif')}).text('GIF'));return b;},createOverlayUrl:function(a){var b=document.URL.split('?');var c=b[0].replace("home","").replace("edit","").replace("tile","").replace("fullscreen","").replace(/\/$/,'');if(a=="gif")return c;if(b[1]!=undefined)return c+"/"+a+"?"+b[1];else return c+"/"+a;},addShareLinksToPostIframes:function(){var a=this,b=$("#post-detail");if(b.length)$(document).ready(function(){$("#post-content iframe").each(function(){var b=$(this);b.wrap("<div class='iframe-wrap' style='position:relative;'></div>");b.after($("<div>",{"class":"iframe-overlay-share grid_8","html":a.getShareHtml()}));b.parent(".iframe-wrap").mouseover(function(a){$(this).find(".iframe-overlay-share").fadeIn();});b.parent(".iframe-wrap").mouseleave(function(a){$(this).find(".iframe-overlay-share").fadeOut();});});});},addOverlayToGifDetail:function(){var a=this,b=$("img#gif, video#gif-mp4"),c=$("#gif-wrap"),d=$("#fullscreen-overlay");if(c.length){$(document).ready(function(){b.after($("<div>",{"class":"gif-overlay-views","id":"gif-overlay-views","html":a.getGifViewHtml()}));});c.bind({mouseenter:function(a){$("#gif-overlay-share, #gif-overlay-views").fadeIn();},mouseleave:function(a){$("#gif-overlay-share, #gif-overlay-views").fadeOut();}});}if(d.length)d.click(function(){window.location=document.URL.replace("tile","").replace("fullscreen","").replace(/\/$/,'');});},sizeFSOverlay:function(){var a=$("#fullscreen-overlay");if(a.length){var b=function(){var a=$("#gif,#gif-mp4"),b=$("#fullscreen-overlay"),c=a.data("original-height"),d=a.data("original-width"),e=$(window).width(),f=$(window).height(),g=d/c,h=e/f,i,j,k,l;if(g>=h){k=(f/c)*d;l=f;j=-(k-e)/2;i=0;}else{k=e;l=(e/d)*c;j=0;i=-(l-f)/2;}b.css({"height":l,"width":k,"margin-top":i,"margin-left":j});$('body').css({"overflow":"hidden","margin":0});};b();$(window).resize(function(){b();});}}};})(window,Giphy);(function(){var a=Giphy.Search={initMini:function(){if(!$("#mini-search-form").length)return;var a=$("#searchbar"),b=$("#search-box"),c=$("#search-button");b.blur();b.click(function(){var a=$('.search-bar-form button').find('img');if(a.hasClass('color'))return false;else{a.attr('src',a.attr('data-focus'));a.addClass('color');}});$(document).mouseup(function(b){var c=$('.search-bar-form button').find('img');if(!a.is(b.target)&&a.has(b.target).length===0){c.attr('src',c.attr('data-blur'));c.removeClass('color');}});b.keydown(function(a){var b=$('.searchbar button').find('img');if(!b.hasClass('color')){b.attr('src',b.attr('data-focus'));b.addClass('color');}});$("#mini-search-form").on('submit',function(a){var b=$('.search-bar-form button').find('img');if(b.attr('src')!=b.attr('data-submit')){a.preventDefault();a.stopImmediatePropagation();b.attr('src',b.attr('data-submit'));searchDelay=setTimeout(function c(){$("#mini-search-form").submit();},500);}});},init:function(){a.hasBeenEntered=false;a.hasKeyDown=false;var b=-1;var c=$("#searchbar"),d=$("#search-box"),e=$("#search-button");if(!(d.length>0))return;$("#placeholder").click(function(a){d.focus();});d.hover(function(){e.addClass("active");},function(){if(!$(this).is(":focus")&&$('.search-result').length==1)e.removeClass("active");});d.click(function(){var a=$('.searchbar button').find('img');if(a.hasClass('color'))return false;else{a.attr('src',a.attr('data-focus'));a.addClass('color');}});$(document).mouseup(function(a){var b=$('.searchbar button').find('img');if(!c.is(a.target)&&c.has(a.target).length===0){b.attr('src',b.attr('data-blur'));b.removeClass('color');}});d.focus(function(){$(".autocomplete").text("");e.addClass("active");});d.blur(function(){$(document).trigger("search:clear");});e.click(function(a){a.preventDefault();if(d.val().length>0)$(document).trigger("search:enter");});d.keydown(function(b){var c=$('.searchbar button').find('img');if(!c.hasClass('color')){c.attr('src',c.attr('data-focus'));c.addClass('color');}a.hasKeyDown=true;var d=b.which;if(d==38||d==40||d==9)b.preventDefault();else $("#placeholder").hide();});d.keyup(function(b){if(a.hasKeyDown===true){if(!a.hasBeenEntered){a.hasBeenEntered=true;_gaq.push(['_trackEvent','Search','QueryEntered']);}var c=b.which;var d=$("#search-box");var e=d.val();if(!e)$("#placeholder").show();if(c==37)return;if(c==38){$(document).trigger("search:up",b);b.preventDefault();return;}if(c==39){var f=$('.autocomplete').text();if(f&&f!=e)$(document).trigger("search:tab",f);b.preventDefault();return;}if(c==40){$(document).trigger("search:down",b);b.preventDefault();return;}if(c==9){var f=$('.autocomplete').text();if(f&&f!=e)$(document).trigger("search:tab",f);b.preventDefault();return;}if(c==13){b.preventDefault();a.enterPressed=true;$(document).trigger("search:enter",b);return;}var g=this;encoded=encodeURIComponent(e);if(typeof encoded==='undefined'||!encoded)return;$(document).trigger("search:execute");}});$(document).bind('search:execute',function(b){b.preventDefault();b.stopPropagation();return;var c=$("#search-box").val();var d=function(){$.get("/api/v1/tags/search/?q="+c,function(b){b.q=c;b.encoded=encoded;b.dont_display=false;if(a.enterPressed){a.enterPressed=false;b.dont_display=true;}$(document).trigger("search:success",b);}).fail(function(){$(document).trigger("search:error");});};if(Giphy.Timer!==undefined)Giphy.Timer.cancel();Giphy.Timer=new Giphy.Utils.timeout();Giphy.Timer.init(d,300,null);});$(document).bind('search:success',function(a,b){if(b.q!=$("#search-box").val())return;$(document).trigger("search:clear");for(var c=0;c<b.objects.length;c++){var d=$(".search-results").find('.search-result').first().clone();$(d).find('.word').text(b.objects[c].name);$(d).find('.word').attr("name-encoded",b.objects[c].name_encoded);d.mousedown(function(){if($(".fb_container").length==0)document.location.href="http://"+window.ASSET_DOMAIN+"/search/"+$(this).find(".word").attr("name-encoded");else{$("#search-box").val($(this).find(".word").attr("name-encoded"));$("#placeholder").hide();Giphy.Facebook.search($(this).find(".word").attr("name-encoded"));}});d.hover(function(){$(".hover").removeClass("hover");$(this).addClass("hover");},function(){$(this).removeClass("hover");});$(".search-results").append(d);$(".search-results").show();$(d).show();}if(b.dont_display)$(document).trigger("search:dont_display");});$(document).bind("search:clear",function(a){$(".autocomplete").text("");$('.search-result:visible').each(function(){$(this).remove();});b=-1;$('.search-results').hide();});$(document).bind("search:reset",function(a){$(document).trigger("search:clear");$('#search-box').val("");$("#placeholder").show();$('#search-box').blur();});$(document).bind("search:down",function(a){$('.search-result').removeClass('hover');b++;var c=$('.search-result:visible').length;if(b>=c)b=c-1;var d=$('.search-result:visible').eq(b);d.addClass("hover");$(document).trigger("search:selected",$(d).find('.word').text());});$(document).bind("search:up",function(a){$('.search-result').removeClass('hover');b--;if(b<0){$(".autocomplete").text("");$('#search_box').focus();b=-1;}else{var c=$('.search-result:visible').eq(b);c.addClass("hover");$(document).trigger("search:selected",$(c).find('.word').text());}});$(document).bind("search:enter",function(b){var c;b.preventDefault();b.stopImmediatePropagation();var d=$('.search-bar-form button').find('img');d.attr('src',d.attr('data-submit'));var e=$("#search-box").val();var f=$(".search-result.hover");var g=f.find(".word").text();var h=f.find(".word").attr("name-encoded");c=setTimeout(function i(){if(g)if($(".fb_container").length==0)document.location.href="http://"+window.ASSET_DOMAIN+"/search/"+h;else{Giphy.Facebook.search(h);$("#search-box").blur();a.hasKeyDown=false;$(document).trigger("search:clear");}else if(e.length>0)if($(".fb_container").length==0){var b=$("#searchbarform").length?$("#searchbarform"):$("#mini-searchbar-form");b.submit();}else{Giphy.Facebook.search(e);$("#search-box").blur();a.hasKeyDown=false;$(document).trigger("search:clear");}},500);return;});$(document).bind("search:selected",function(a,b){var c=$('#search-box');var d=$('.autocomplete');var e=c.val();var f="<span>";if(!b||e.trim().toLowerCase()==b)d.text('');else d.html(b);});$(document).bind("search:tab",function(a,b){$("#search-box").val(b);$(document).trigger("search:execute");});var f=navigator.userAgent.toLowerCase();if(!f.indexOf("android")>-1)d.focus();if($("#reaction-gifs").length>0)$("#reaction-gifs").mouseover(function(){$("#search-box").blur();});if($('.gifs').length)$('.gifs .gif img').each(function(){var a=$(this).attr('data-animated');if(a)$('<img/>')[0].src=a;});}};})(window,Giphy);(function(){var a=Giphy.SearchResults={attachInfiniteScroll:function(a){$('ul.freeform').infinitescroll({nextSelector:"a#next-page-arrow",navSelector:"div#paging",itemSelector:".freeform li.ungrouped",bufferPx:10,state:{currPage:window.CURRENT_PAGE},behavior:"giphy",loading:{finished:function(){$('#infscr-loading').remove();var a=$(this).data('infinitescroll');Giphy.Images.sizeImages();Giphy.Images.attachHovers();if(window.ADD_EDIT_JS===true)Giphy.UserEdit.addEditGifLinks();window.CURRENT_PAGE=a.options.state.currPage;window.OFFSET_PAGE=window.CURRENT_PAGE-1;current_page=a.options.path[0]+a.options.state.currPage;if($(".fb_container").length==0)Giphy.Analytics.fireEvents(current_page);else Giphy.Analytics.fireEvents(current_page,true);},finishedMsg:"",img:"/static/img/loading_bar_page.gif",msgText:"",speed:'fast'},pathParse:function(a,b){var c=a.split('/'),d=a.split('?')[1],e=$(".gif").last().parent().attr('href');appendParams=d?"?"+d+"&is=1":"?is=1",appendParams=appendParams+"&l="+e,base=c[1],term=c[c.indexOf(base)+1];try{var f=parseInt(c[c.indexOf('search')+2],10);}catch(g){var f=1;}if(base=='search')return ['/'+base+'/'+term+'/',appendParams];else return ['/'+base+'/',appendParams];}});if(a!==undefined)a();return this;}};})(window,Giphy);(function(){var a=Giphy.Sharing={shortURLs:function(){ZeroClipboard.config({swfPath:"/static/js/zeroclipboard.swf"});var a=new ZeroClipboard($(".short-link"));a.on('copy',function(a){a.clipboardData.setData("text/plain",$(".short-link").attr("data-url"));showSuccess("Short URL copied to clipboard!");});},attachShareTools:function(){ZeroClipboard.config({swfPath:"/static/js/zeroclipboard.swf"});var a=new ZeroClipboard($("#share-giphy-link-icon"));a.on('copy',function(a){a.clipboardData.setData("text/plain",$("#share-giphy-link").val());showSuccess("Giphy link copied to clipboard!");});var b=new ZeroClipboard($("#share-gif-link-icon"));b.on('copy',function(a){a.clipboardData.setData("text/plain",$("#share-gif-link").val());showSuccess("GIF link copied to clipboard!");});var c=new ZeroClipboard($("#share-html5-link-icon"));c.on('copy',function(a){a.clipboardData.setData("text/plain",$("#share-smart-link").val());showSuccess("HTML5 link copied to clipboard!");});var d=new ZeroClipboard($("#iframe-embed-code-icon"));d.on('copy',function(a){a.clipboardData.setData("text/plain",$("#iframe-embed-code").val());showSuccess("IFrame embed code copied to clipboard!");});var e=new ZeroClipboard($("#optimized-embed-code-icon"));e.on('copy',function(a){a.clipboardData.setData("text/plain",$("#optimized-embed-code").val());showSuccess("JS embed code copied to clipboard!");});var f=new ZeroClipboard($("#smart-embed-code-icon"));f.on('copy',function(a){a.clipboardData.setData("text/plain",$("#smart-embed-code").val());showSuccess("HTML5 embed code copied to clipboard!");});$("#modal-container").find("input[type='text']").click(function(){$(this).select();});$(document).bind("share-tools:open",function(){if($("#modal-container").css('display')=='none')$("#modal-container").show();});$(document).bind("close-all-modals",function(){if($("#modal-container").css('display')=='block')$("#modal-container").hide();});$(document).bind("share-tools:close",function(){if($("#modal-container").css('display')=='block')$("#modal-container").hide();});$(document).bind("share-tools:close-children",function(){$(".modal-child").hide();$('.hover').removeClass("hover");});$(".action").click(function(){if($(this).hasClass("hover")){$(document).trigger("share-tools:close");$(this).removeClass("hover");}else{$(document).trigger("share-tools:close-children");$(document).trigger("share-tools:open");$(this).addClass('hover');}return false;});$(".playchoice").on('click',function(){if($(this).attr('id')=='autoplay'&&!$(this).hasClass('active-playchoice')){$("#hoverplay").removeClass("active-playchoice");$("#hoverplay").addClass("inactive-playchoice");$(this).removeClass("inactive-playchoice");$(this).addClass("active-playchoice");$("#iframe-embed-code").val($("#iframe-embed-code").val().replace("?playOnHover=true",""));$("#optimized-embed-code").val($("#optimized-embed-code").val().replace("var _giphy_play_on_hover = true;",""));}else if($(this).attr('id')=='hoverplay'&&!$(this).hasClass('active-playchoice')){$("#autoplay").addClass("inactive-playchoice");$("#autoplay").removeClass("active-playchoice");$(this).addClass("active-playchoice");$(this).removeClass("inactive-playchoice");$("#iframe-embed-code").val($("#iframe-embed-code").val().replace(/embed\/([a-zA-Z0-9-_]*)/,"embed\/$1?playOnHover=true"));$("#optimized-embed-code").val($("#optimized-embed-code").val().replace("var _giphy","var _giphy_play_on_hover = true; var _giphy"));}});$("#shorten-url").click(function(){$(".shortener-options").show();});$("#embed-share").click(function(){$(".embed-options").show();});$("#share-link").click(function(){$(".share-options").show();});$("#redirect-to").on('click',function(){$(this).select();});$("#redirect-to").keyup(function(a){var b=a.which;if(b==13){a.preventDefault();$("#shorten-create-submit").click();return;}});var g=$("#shorten-create-submit");g.click(function(a){a.preventDefault();var b=this;$(b).prop('disabled',true);$(b).attr('value','ONE SEC...');$.ajax({type:"post",url:"//"+window.ASSET_DOMAIN+"/ajax/shorturl/create/",data:{'gif_id':$("#gif").attr('data-id'),'redirect_to':$('#redirect-to').val()}}).success(function(a){if(a.result.code!=200)return;else{$(b).prop('disabled',false);$(b).attr('value','Shorten');$("#redirect-to").val(a.result.short_url);var c=new ZeroClipboard(g);g.val("Copy");g.css('background-color','#2afd9c');c.on('copy',function(b){b.clipboardData.setData("text/plain",a.result.short_url);showSuccess("Short URL copied to clipboard!");});}}).error(function(){$(b).prop('disabled',false);$(b).attr('value','Shorten');showError("An error has occurred.");});});var h=$('#tumblr-share').not('.post');if(h.length)h.click(function(a){a.preventDefault();if(window.PHOTOBOOTH)window.open("http://www.tumblr.com/share/photo?source="+encodeURIComponent($('#gif').attr('data-image_original_url').replace('giphy.gif','500w.gif'))+"&caption="+encodeURIComponent(document.title)+"&clickthru="+encodeURIComponent($('#gif').attr('data-bitly_gif_url')),'1361370515040','width=620,height=500,toolbar=0,menubar=0,location=0,status=0,scrollbars=0,resizable=1,left=0,top=0');else window.open("http://www.tumblr.com/share/photo?source="+encodeURIComponent($('#gif').attr('data-tumblr_share_url'))+"&caption="+encodeURIComponent(document.title)+"&clickthru="+encodeURIComponent($('#gif').attr('data-bitly_gif_url')),'1361370515040','width=620,height=500,toolbar=0,menubar=0,location=0,status=0,scrollbars=0,resizable=1,left=0,top=0');});},attachSharingAnalytics:function(){var a=$('#embed-share');if(a.length)a.click(function(a){$.ajax({type:"post",beforeSend:function(a){a.setRequestHeader("Authorization","ApiKey giphy-website:e0771ed7b244ec9c942bea646ad08e6bf514f51a");},url:"/api/v1/analytics/",data:JSON.stringify({"gif_id":$('#gif').attr("data-gif_id"),"analytic_type":"embed_share"}),contentType:"application/json",dataType:"application/json"});});var b=$('#tumblr-share');if(b.length)b.click(function(a){a.preventDefault();$.ajax({type:"post",beforeSend:function(a){a.setRequestHeader("Authorization","ApiKey giphy-website:e0771ed7b244ec9c942bea646ad08e6bf514f51a");},url:"/api/v1/analytics/",data:JSON.stringify({"gif_id":$('#gif').attr("data-gif_id"),"analytic_type":"tumblr_share"}),contentType:"application/json",dataType:"application/json"});});var c=$('#fb-share');if(c.length)c.click(function(){$.ajax({type:"post",beforeSend:function(a){a.setRequestHeader("Authorization","ApiKey giphy-website:e0771ed7b244ec9c942bea646ad08e6bf514f51a");},url:"/api/v1/analytics/",data:JSON.stringify({"gif_id":$('#gif').attr("data-gif_id"),"analytic_type":"facebook_share"}),contentType:"application/json",dataType:"application/json"});});var d=$('#googleplus-share');if(d.length)d.click(function(){$.ajax({type:"post",beforeSend:function(a){a.setRequestHeader("Authorization","ApiKey giphy-website:e0771ed7b244ec9c942bea646ad08e6bf514f51a");},url:"/api/v1/analytics/",data:JSON.stringify({"gif_id":$('#gif').attr("data-gif_id"),"analytic_type":"googleplus_share"}),contentType:"application/json",dataType:"application/json"});});var e=$('#pinterest-share');if(e.length)e.click(function(){$.ajax({type:"post",beforeSend:function(a){a.setRequestHeader("Authorization","ApiKey giphy-website:e0771ed7b244ec9c942bea646ad08e6bf514f51a");},url:"/api/v1/analytics/",data:JSON.stringify({"gif_id":$('#gif').attr("data-gif_id"),"analytic_type":"pinterest_share"}),contentType:"application/json",dataType:"application/json"});});var f=$('#instagram-share');if(f.length)f.click(function(){$.ajax({type:"post",beforeSend:function(a){a.setRequestHeader("Authorization","ApiKey giphy-website:e0771ed7b244ec9c942bea646ad08e6bf514f51a");},url:"/api/v1/analytics/",data:JSON.stringify({"gif_id":$('#gif').attr("data-gif_id"),"analytic_type":"instagram_share"}),contentType:"application/json",dataType:"application/json"});});var g=$('#twitter-share');if(g.length)g.click(function(){$.ajax({type:"post",beforeSend:function(a){a.setRequestHeader("Authorization","ApiKey giphy-website:e0771ed7b244ec9c942bea646ad08e6bf514f51a");},url:"/api/v1/analytics/",data:JSON.stringify({"gif_id":$('#gif').attr("data-gif_id"),"analytic_type":"twitter_share"}),contentType:"application/json",dataType:"application/json"});});}};})(window,Giphy);(function(){var a=Giphy.Upload={landingPage:function(){var a=$("#upload-landing-page");if(a.length){var b="/upload/new";window.LOGIN_NEXT=b;$(document).ready(function(){if(window.LOGGED_IN)window.location=b;});}},initPUpload:function(){var a=this;window.uploader=new plupload.Uploader({browse_button:"dropzone",url:$("#upload-gif-form").attr("action"),runtimes:'html5,flash,html4',mime_types:[{title:"Gifs",extensions:"gif"},{title:"Videos",extensions:"mp4,mov,m4v,mpg"}],dragdrop:true,drop_element:"user-content",flash_swf_url:'http://rawgithub.com/moxiecode/moxie/master/bin/flash/Moxie.cdn.swf'});window.uploader.bind("FilesAdded",function(b,c){var d=1;for(i=0;i<window.uploader.files.length;i++)if(i>=d){b.splice(i);window.showError("Only one gif at a time please. ;)");}else{$("#gif-url").hide();$('#optional-fields').slideDown();a.showUploadPreview(c[i]);}});$("#upload-gif-button").on("click",function(b){b.preventDefault();var c={"session_key":$('#session-key').val(),"api_key":$('#api-key').val(),"tags":$('#tags').val(),"source_post_url":$('#source-post-url').val(),"source_image_url":$('#gif-url').val(),"username":$('#username').val()};window.uploader.setOption("multipart_params",c);if(window.uploader.files.length===0){urlValue=$('#gif-url').val();if(urlValue.length>1){var d=new RegExp('(http|https)://[\\w-]+(\\.[\\w-]+)+([\\w-.,@?^=%&:/~+#-]*[\\w@?^=%&;/~+#-])?');if(d.test(urlValue)){$("#upload-gif-button").hide();$("#kr-loading").show();a.handleURLSubmit();}else{window.showError("Please Enter A Valid URL");return;}}else{window.showError("Please Select a GIF");return;}}else{$("#upload-gif-button").hide();$("#upload-progressbar").show();window.uploader.start();}});window.uploader.bind("UploadProgress",function(a,b){progressBar=$("#upload-progressbar-fill");progressText=$("#upload-progressbar-text");progressBar.css("width",b.percent+"%");progressText.html(b.percent+"%");if(b.percent>=98)progressText.text("Upload complete! Processing Gif...");});window.uploader.bind("FileUploaded",function(b,c,d){a.handleApiResponse(d.response);});window.uploader.bind("UploadComplete",function(a,b){$("#upload-progressbar-fill").css("width","100%");});window.uploader.bind("Error",function(a,b){Giphy.Upload.handleError();window.showError("Uh-oh. Something went wrong. Please try again: "+b.message);});window.uploader.init();a.optionalsListener();},optionalsListener:function(){var a=$('#optional-fields'),b=$('#gif-url');b.on('input',function(){if($('#gif-url').val())a.slideDown();else a.slideUp();});},showUploadPreview:function(a){var b=a.getNative(),c=new FileReader(),d=["image/gif"],e=["video/x-m4v","video/mpg","video/m4v","video/mov","video/mp4","video/quicktime"],f=$.inArray(a.type,d),g=$.inArray(a.type,e),h=Giphy.Utils.canPlayMP4();c.onload=function(b){var c=$(".preview-wrapper");if(f>-1){var d=new Image();d.src=b.target.result;var e=225,i=e/d.height,j=d.width*i,k=d.height*i,l=$("<img />",{"src":d.src,"height":k,"width":j,"class":"upload-preview"});$(".dropzone-text").hide();$(".upload-icon").hide();c.append(l);c.show();}else if(g>-1){$(".upload-icon").hide();if(h===true){$(".dropzone-text").hide();c.html('<video width="400" height="225" autoplay loop>'+'<source src="'+b.target.result+'" type="video/mp4"></source>'+'</video>');c.show();}else $(".dropzone-text").text(a.name);}else{$('#optional-fields').slideUp();$("#gif-url").show();window.uploader.removeFile(a);window.showError("Uh-oh. We don't support that file type.");}};c.readAsDataURL(b);},handleURLSubmit:function(){var a=this,b=new FormData($("#upload-gif-form")[0]);$.ajax({beforeSend:function(a){a.setRequestHeader("");},url:$("#upload-gif-form").attr("action"),type:"POST",cache:false,contentType:false,timeout:720000,processData:false,data:b}).done(function(b,c,d){a.handleApiResponse(b);}).fail(function(a,b,c){var d=a.statusCode();Giphy.Upload.handleError();window.showError("Uh-oh. Something went wrong. Please try again: "+b);return;});},handleError:function(){window.uploader.splice();window.uploader.refresh();var a=$("#upload-progressbar");a.hide();a.empty();a.css("width","0%");$("#upload-progressbar-text").html("0%");$("#kr-loading").hide();$("#gif-url").show();$(".dropzone-text").text("+GIF or VIDEO FILE");$(".dropzone-text").show();$("#upload-gif-button").show();$("#optional-fields").slideUp();$(".preview-wrapper").empty().hide();},handleApiResponse:function(a){if(typeof a=="undefined"){Giphy.Upload.handleError();window.showError("Uh-oh. Something went wrong. Please try again.");return;}if(typeof a=="string")a=$.parseJSON(a);var b=a.meta.status;if(b==200){if(a.data==undefined||a.data.id==undefined){Giphy.Upload.handleError();window.showError("Uh-oh. Something went wrong. Please try again.");return;}if(window.isGifys){$('#upload-gif-form').hide();$('#gifys-submission-complete').show();}else if(window.IS_PARTNER||window.IS_ARTIST||!window.LOGGED_IN)window.location="/gifs/"+a.data.id;else window.location="/gifs/"+a.data.id+"?status=200&message=uploaded";}else if(b==400){Giphy.Upload.handleError();window.showError(a.meta.msg);}else if(b==401)window.location=window.location+"?status=401";else if(b==409)if(window.IS_PARTNER||window.IS_ARTIST||!window.LOGGED_IN)window.location="/gifs/"+a.data.id;else{window.location="/gifs/"+a.data.id+"?status=409&message=uploaded";window.location="/favorites?status=409";}else if(b==480)window.location="/480";else if(b>=500){Giphy.Upload.handleError();window.showError("Uh-oh. Something went wrong. Please try again.");}else{Giphy.Upload.handleError();window.showError("Error:"+a.meta.msg);}},setBG:function(){}};})(window,Giphy);(function(){var a=Giphy.UserEdit={addEditGifLinks:function(){var a=$(".user-search-results");if(a.length)$.each($(".a-gif").not(".editLink").not(".no-edit"),function(a,b){var c=$(b),d="/home/gifs/"+c.attr("data-id")+"/edit/",e=$("<a></a>").addClass("button small transparent-background edit-image").attr("href",d).html("EDIT");c.addClass("editLink");c.attr("href",d);c.after(e);});},addEditBanner:function(){var a=$(".banner img").not("#settings-banner");if(a.length){var b=$("<a></a>").addClass("small button transparent-background edit-image").attr("href","/home/settings/edit/").html("EDIT");a.after(b);}},uploadNewBanner:function(){var a=$('#banner-button'),b=$('#banner-input'),c=$('#banner-form');a.click(function(a){a.preventDefault();b.click();b.change(function(){c.submit();});});},uploadNewAvatar:function(){var a=$('#avatar-button'),b=$('#avatar-input'),c=$('#avatar-form');a.click(function(a){a.preventDefault();b.click();b.change(function(){c.submit();});});},showSettingsExampleModal:function(){$('#guide-text').click(function(a){$('#metadata-example').modal({closeText:'',zIndex:100});});},resetListner:function(){var a=$('.reset');a.click(function(a){$(this).siblings('.reset-input').prop('checked',true);if(a.target.form)setTimeout(function(){a.target.form.submit();},200);});}};})(window,Giphy);(function(){var a=Giphy.Utils={fadeMessages:function(){$(document).ready(function(){setTimeout(function(){$('.flash').fadeOut('slow');},2000);});},canPlayMP4:function(){return !!document.createElement('video').canPlayType('video/mp4; codecs=avc1.42E01E,mp4a.40.2');},getParameterByName:function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return c==null?"":decodeURIComponent(c[1].replace(/\+/g," "));},hideLogo:function(){$("#logo-image").hide();},checkLogin:function(){if(window.LOGGED_IN)return true;return false;},log:function(a){if(window.console)console.log(a);return;},timeout:function(){var a=null;var b=null;var c=0;var d=[];var e=false;var f=false;this.init=function(h,i,j){var k;if(e)return false;if(!h)return false;if(!i)return false;a=h;b=i;e=true;f=false;c=j?j:0;d=[];for(k=3;k<arguments.length;k++)d[d.length]=arguments[k];setTimeout(g,b);};this.cancel=function(){f=true;e=false;c=0;};function g(){e=false;if(f)return;a.apply(null,d);if(c>0){c--;setTimeout(g,b);}}}};var b=3000;window.showSuccess=function(a,c,d){if(typeof d!=='undefined')var e=d;else var e=b;var f=$("<div>");$(f).addClass("flash");$(f).addClass("success");$(f).text(a);$("#messages").append(f);setTimeout(function(){if(typeof c!=='undefined')document.location.pathname=c;f.fadeOut('slow');},e);};window.showError=function(a){var b=$("<div>");$(b).addClass("flash");$(b).addClass("error");$(b).text(a);$("#messages").append(b);Giphy.Utils.fadeMessages();};})(window,Giphy);$(function(){$(document).ready(function(){if(!$(".gif-detail").length>0)return;Giphy.GifDetail.html5Player();Giphy.Overlays.addOverlayToGifDetail();Giphy.Overlays.sizeFSOverlay();Giphy.Sharing.attachShareTools();Giphy.Favorites.permalink();Giphy.Sharing.shortURLs();var a=document.URL.split('gifs');a.shift();var b=a.join('gifs').split('?')[0].replace(/\//g,'').replace('#','').replace('edit','').replace("#_=_","").replace("_=_","");$.get("/gifs/"+b+"/related",function(a){$("#related-container").html(a);Giphy.Homepage.attachHovers();});Giphy.GifDetail.initTwitter();Giphy.GifDetail.initFacebook();Giphy.Instagram.showModal();Giphy.GifDetail.noResizeListner();Giphy.GifDetail.hideGifListner();Giphy.Sharing.attachSharingAnalytics();Giphy.Analytics.trackGifDetailView();});});$(function(){$(document).ready(function(){Giphy.Etc.init();if($(".fb_container").length==0)Giphy.Etc.checkLogin({success:function(){var a=$("#default-nav");if(a.length)$.get("/ajax/userheader/?parent="+location.href,function(a){$("#default-nav").replaceWith(a);$("#default-nav").show();if(window.IS_PARTNER||window.IS_ARTIST){Giphy.UserEdit.showSettingsExampleModal();Giphy.UserEdit.uploadNewBanner();Giphy.UserEdit.uploadNewAvatar();Giphy.UserEdit.resetListner();}});}});Giphy.Images.preloadImages();Giphy.Backgrounds.setRandomBackground();Giphy.Login.facebook();Giphy.Favorites.nav();Giphy.Search.init();Giphy.Search.initMini();Giphy.Browsebar.init();Giphy.Browsebar.attachBrowsebarHovers();Giphy.Images.attachHovers();Giphy.Images.sizeImagesToFrame();if(Giphy.Utils.getParameterByName('hideLogo')=='true')Giphy.Utils.hideLogo();if(Giphy.Utils.getParameterByName('status')&&Giphy.Utils.getParameterByName('message')){var a={"uploaded":"GIF uploaded! It's been added to your favorites.","welcome":"Welcome To Giphy!","login":"You are now logged in.","userexists":"That email address has already been registered. Did you forget your password?","twautherror":"Looks like Twitter is experiencing technical difficulties. Please try again.","fbautherror":"Looks like Facebook is experiencing technical difficulties. Please try again.","gifdeleted":"Your GIF has been deleted."},b=Giphy.Utils.getParameterByName('message');if(parseInt(Giphy.Utils.getParameterByName('status'),10)==200)showSuccess(a[b]);else showError(a[b]);}});});$(function(){$(document).ready(function(){if(!$("#homepage").length>0)return;Giphy.Nav.share();Giphy.Nav.attachFooter();Giphy.Homepage.init();});});$(function(){$(document).ready(function(){if(!$("#user-login").length>0)return;Giphy.Login.loginFocus();});});$(function(){$(document).ready(function(){if(!$(".post-content").length>0)return;Giphy.Sharing.shortURLs();Giphy.Sharing.attachShareTools();Giphy.Sharing.attachSharingAnalytics();Giphy.Overlays.addOverlayToGifDetail();Giphy.Overlays.sizeFSOverlay();$('.post-content iframe').each(function(){var a=parseInt($(this).css('width').replace('px',''));var b=parseInt($(this).css('height').replace('px',''));var c=643;var d=(c*b)/a;$(this).css('height',d+'px');$(this).css('width',c+'px');});var a=document.URL.split('posts');a.shift();var b=a.join('posts').split('?')[0].replace('/','').replace('#','');var c="/posts/related/gifs/"+b;var d=$("#post-detail").data("post_id");var e="/posts/related/posts/"+d;e=e.replace("//","/");$(document).on('scroll',function(){$("iframe").each(function(){var a=document.createElement('a');a.href=$(this).attr('src');if(a.protocol==document.location.protocol&&a.hostname==document.location.hostname){var b=$(this).contents().find('#gif');if(($(this).offset().top<=$(window).height()+$(window).scrollTop())&&($(this).offset().top+$(this).height()>=$(window).scrollTop())){if($(b).attr('src')!=$(b).attr('data-animated'))$(b).attr('src',$(b).attr('data-animated'));}else if($(b).attr('src')!=$(b).attr('data-still'))$(b).attr('src',$(b).attr('data-still'));}});});});});$(function(){$(document).ready(function(){if(!$("#searchresults").length>0)return;Giphy.Analytics.trackSearchResultsView();Giphy.SearchResults.attachInfiniteScroll();Giphy.Images.sizeImages();Giphy.Images.attachHovers();});});$(function(){$(document).ready(function(){if(!$(".upload-page").length>0)return;Giphy.Upload.initPUpload();Giphy.Upload.setBG();});});